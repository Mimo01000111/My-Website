<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>About Us Control Panel - Barangay Online System</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="AboutUsAdmin.css">
</head>
<body>
    <header>
        <div class="container">
            <div class="navbar">
                <div class="logo" onclick="window.open('AboutUs.html', '_blank')">
                    <div class="logo-icon"><i class="fas fa-cog"></i></div>
                    <h1>BARANGAY ONLINE SYSTEM - ADMIN ABOUT US</h1>
                </div>

                <div class="nav-links">
                    <a href="PanelAdminView.html">Panel-Page</a>
                    <a href="CreateAccountAdmin.html">Create-Page</a>
                    <a href="AboutUsAdmin.html" class="active">AboutUs-Page</a>
                    <a href="LogAdminControl.html">Log-Page</a>
                </div>
            </div>
        </div>
    </header>

    <div class="admin-panel">
        <div class="sidebar">
            <div class="sidebar-header">
                <h2 class="sidebar-title"><i class="fas fa-cogs"></i> Control Center</h2>
            </div>
            <ul class="sidebar-menu">
                <li><a href="#" class="active" data-tab="welcome"><span class="sidebar-icon"><i class="fas fa-home"></i></span> Dashboard</a></li>
                <li><a href="#" data-tab="header"><span class="sidebar-icon"><i class="fas fa-heading"></i></span> Header & Hero</a></li>
                <li><a href="#" data-tab="about"><span class="sidebar-icon"><i class="fas fa-info-circle"></i></span> About Barangay</a></li>
                <li><a href="#" data-tab="mission"><span class="sidebar-icon"><i class="fas fa-bullseye"></i></span> Mission & Vision</a></li>
                <li><a href="#" data-tab="officials"><span class="sidebar-icon"><i class="fas fa-users"></i></span> Barangay Officials</a></li>
                <li><a href="#" data-tab="committees"><span class="sidebar-icon"><i class="fas fa-user-friends"></i></span> Committees</a></li>
                <li><a href="#" data-tab="documents"><span class="sidebar-icon"><i class="fas fa-file-alt"></i></span> Document Requirements</a></li>
                <li><a href="#" data-tab="location"><span class="sidebar-icon"><i class="fas fa-map-marker-alt"></i></span> Location</a></li>
                <li><a href="#" data-tab="contact"><span class="sidebar-icon"><i class="fas fa-phone-alt"></i></span> Contact Information</a></li>
                <li><a href="#" data-tab="faq"><span class="sidebar-icon"><i class="fas fa-question-circle"></i></span> FAQ</a></li>
                <li><a href="#" data-tab="feedback"><span class="sidebar-icon"><i class="fas fa-comments"></i></span> User Feedback</a></li>
                <li><a href="#" data-tab="footer"><span class="sidebar-icon"><i class="fas fa-sitemap"></i></span> Footer</a></li>
            </ul>
        </div>
        <div class="admin-content">
            <div class="tab-top-actions">
                <a href="AboutUs.html" target="_blank"><i class="fas fa-eye"></i> View Site</a>
                <a href="#" id="save-all-btn"><i class="fas fa-save"></i> Save All</a>
                <a href="#" id="logout-btn"><i class="fas fa-sign-out-alt"></i> Logout</a>
            </div>

            <div id="welcome" class="tab-content active">
                <div class="admin-section">
                    <h2 class="section-title"><i class="fas fa-tachometer-alt"></i> Dashboard Overview</h2>
                    
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-value" id="total-officials">0</div>
                            <div class="stat-label">Total Officials</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-value" id="total-committees">0</div>
                            <div class="stat-label">Active Committees</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-value" id="total-documents">0</div>
                            <div class="stat-label">Document Types</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-value" id="total-feedback">0</div>
                            <div class="stat-label">User Feedback</div>
                        </div>
                    </div>
                    
                    <div class="alert alert-success">
                        <strong><i class="fas fa-check-circle"></i> System Ready!</strong> Welcome to the Barangay Admin Control Panel. All changes are auto-saved.
                    </div>
                    
                    <h3 style="margin-bottom: 15px; color: var(--dark);">Quick Actions</h3>
                    <div class="quick-actions">
                        <button class="btn btn-primary" id="preview-site-btn">
                            <i class="fas fa-external-link-alt"></i> Preview Site
                        </button>
                        <button class="btn btn-success" id="add-official-quick">
                            <i class="fas fa-user-plus"></i> Add Official
                        </button>
                        <button class="btn btn-warning" id="add-committee-quick">
                            <i class="fas fa-users"></i> Add Committee
                        </button>
                        <button class="btn btn-secondary" id="export-data-btn">
                            <i class="fas fa-download"></i> Export Data
                        </button>
                    </div>
                </div>

                <div class="admin-section">
                    <h2 class="section-title"><i class="fas fa-history"></i> Recent Activity</h2>
                    <div id="recent-activity">
                        <p style="color: var(--gray); text-align: center; padding: 20px;">
                            <i class="fas fa-clock"></i> Activity log will appear here...
                        </p>
                    </div>
                </div>

                <div class="quick-guide-center">
                    <div class="quick-guide-header">
                        <h2 class="quick-guide-title"><i class="fas fa-book"></i> Quick Guide</h2>
                    </div>
                    
                    <div id="welcome-guide" class="guide-section">
                        <h4>Dashboard Overview</h4>
                        <p>The dashboard provides a quick overview of your system's key metrics and recent activity.</p>
                        <ul>
                            <li>Monitor total officials, committees, and documents</li>
                            <li>Track system status and recent activity</li>
                            <li>Use quick actions for common tasks</li>
                            <li>All changes are automatically saved</li>
                        </ul>
                    </div>
                </div>
            </div>

            <div id="header" class="tab-content">
                <div class="admin-section">
                    <h2 class="section-title"><i class="fas fa-heading"></i> Header & Hero Section Management</h2>
                    <p style="color: var(--gray); margin-bottom: 25px;">Update the main header and hero section that appears at the top of your About Us page.</p>
                    
                    <form id="header-form">
                        <div class="form-group">
                            <label class="form-label" for="site-title">Site Title</label>
                            <input type="text" class="form-control" id="site-title" placeholder="Enter site title">
                            <small class="help-text">This appears in the header navigation</small>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label" for="page-hero-title">Page Hero Title</label>
                            <input type="text" class="form-control" id="page-hero-title" placeholder="Enter page hero title">
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label" for="page-hero-subtitle">Page Hero Subtitle</label>
                            <textarea class="form-control" id="page-hero-subtitle" placeholder="Enter page hero subtitle"></textarea>
                        </div>
                        
                        <button type="submit" class="btn btn-primary">
                            <i class="fas fa-save"></i> Update Header & Hero
                        </button>
                    </form>
                </div>

                <div class="quick-guide-center">
                    <div class="quick-guide-header">
                        <h2 class="quick-guide-title"><i class="fas fa-book"></i> Quick Guide</h2>
                    </div>
                    
                    <div id="header-guide" class="guide-section">
                        <h4>Header & Hero Section</h4>
                        <p>Customize the main header and hero section of your About Us page.</p>
                        <ul>
                            <li>Update the site title in the header</li>
                            <li>Modify the hero title and subtitle</li>
                            <li>Changes appear immediately on the main site</li>
                        </ul>
                    </div>
                </div>
            </div>

            <div id="about" class="tab-content">
                <div class="admin-section">
                    <h2 class="section-title"><i class="fas fa-info-circle"></i> About Barangay Section</h2>
                    <p style="color: var(--gray); margin-bottom: 25px;">Tell the story of your barangay and upload an image of your barangay hall or community.</p>
                    
                    <form id="about-form">
                        <div class="form-group">
                            <label class="form-label" for="about-section-title">Section Title</label>
                            <input type="text" class="form-control" id="about-section-title" placeholder="Enter section title">
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label" for="about-story-title">Story Title</label>
                            <input type="text" class="form-control" id="about-story-title" placeholder="Enter story title">
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label" for="about-story-para1">Story Paragraph 1</label>
                            <textarea class="form-control" id="about-story-para1" placeholder="Enter first paragraph"></textarea>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label" for="about-story-para2">Story Paragraph 2</label>
                            <textarea class="form-control" id="about-story-para2" placeholder="Enter second paragraph"></textarea>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label" for="about-story-para3">Story Paragraph 3</label>
                            <textarea class="form-control" id="about-story-para3" placeholder="Enter third paragraph"></textarea>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label" for="about-barangay-image">Barangay Image URL</label>
                            <input type="text" class="form-control" id="about-barangay-image" placeholder="https://example.com/barangay-image.jpg">
                            <small class="help-text">Enter direct URL to high-quality barangay image</small>
                            <div class="image-preview-container">
                                <img id="about-barangay-image-preview" class="image-preview" alt="Barangay image preview">
                            </div>
                        </div>
                        
                        <button type="submit" class="btn btn-primary">
                            <i class="fas fa-save"></i> Update About Section
                        </button>
                    </form>
                </div>

                <div class="quick-guide-center">
                    <div class="quick-guide-header">
                        <h2 class="quick-guide-title"><i class="fas fa-book"></i> Quick Guide</h2>
                    </div>
                    
                    <div id="about-guide" class="guide-section">
                        <h4>About Barangay Section</h4>
                        <p>Customize the about section with your barangay's story and image.</p>
                        <ul>
                            <li>Update the section title and story title</li>
                            <li>Modify the story paragraphs</li>
                            <li>Add a barangay hall or community image</li>
                            <li>Preview images before saving</li>
                        </ul>
                    </div>
                </div>
            </div>

            <div id="mission" class="tab-content">
                <div class="admin-section">
                    <h2 class="section-title"><i class="fas fa-bullseye"></i> Mission & Vision Section</h2>
                    <p style="color: var(--gray); margin-bottom: 25px;">Define your barangay's mission and vision statements.</p>
                    
                    <form id="mission-form">
                        <div class="form-group">
                            <label class="form-label" for="mission-vision-title">Section Title</label>
                            <input type="text" class="form-control" id="mission-vision-title" placeholder="Enter section title">
                        </div>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label class="form-label" for="mission-title">Mission Title</label>
                                <input type="text" class="form-control" id="mission-title" placeholder="Enter mission title">
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label" for="vision-title">Vision Title</label>
                                <input type="text" class="form-control" id="vision-title" placeholder="Enter vision title">
                            </div>
                        </div>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label class="form-label" for="mission-text">Mission Text</label>
                                <textarea class="form-control" id="mission-text" placeholder="Enter mission statement"></textarea>
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label" for="vision-text">Vision Text</label>
                                <textarea class="form-control" id="vision-text" placeholder="Enter vision statement"></textarea>
                            </div>
                        </div>
                        
                        <button type="submit" class="btn btn-primary">
                            <i class="fas fa-save"></i> Update Mission & Vision
                        </button>
                    </form>
                </div>

                <div class="quick-guide-center">
                    <div class="quick-guide-header">
                        <h2 class="quick-guide-title"><i class="fas fa-book"></i> Quick Guide</h2>
                    </div>
                    
                    <div id="mission-guide" class="guide-section">
                        <h4>Mission & Vision Section</h4>
                        <p>Define your barangay's mission and vision statements.</p>
                        <ul>
                            <li>Update the section title</li>
                            <li>Modify mission and vision titles</li>
                            <li>Edit mission and vision statements</li>
                            <li>Keep statements concise and impactful</li>
                        </ul>
                    </div>
                </div>
            </div>

            <div id="officials" class="tab-content">
                <div class="admin-section">
                    <h2 class="section-title"><i class="fas fa-users"></i> Barangay Officials Section</h2>
                    <p style="color: var(--gray); margin-bottom: 25px;">Manage the list of barangay officials. You can add, edit, or remove officials as needed.</p>
                    
                    <div class="search-container">
                        <input type="text" class="search-bar" id="officials-search" placeholder="Search officials by name or position...">
                        <i class="fas fa-search search-icon"></i>
                    </div>
                    
<div class="tabs">
    <div class="tab active" data-official-tab="existing">
        <i class="fa-solid fa-users"></i> Existing Officials
    </div>

    <div class="tab" data-official-tab="add">
        <i class="fa-solid fa-user-plus"></i> Add New Official
    </div>
</div>
                    
                    <div id="existing-officials" class="tab-content active">
                        <div class="alert alert-success">
                            <strong><i class="fas fa-info-circle"></i> Pro Tip:</strong> Click on any official to edit their details.
                        </div>
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>Avatar</th>
                                    <th>Name</th>
                                    <th>Position</th>
                                    <th>Description</th>
                                    <th>Contact</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="officials-table-body">
                            </tbody>
                        </table>
                    </div>
                    
                    <div id="add-official" class="tab-content">
                        <form id="official-form">
                            <input type="hidden" id="official-edit-id" value="">
                            <div class="form-row">
                                <div class="form-group">
                                    <label class="form-label" for="official-name">Name *</label>
                                    <input type="text" class="form-control" id="official-name" placeholder="Enter official name" required>
                                </div>
                                
                                <div class="form-group">
                                    <label class="form-label" for="official-position">Position *</label>
                                    <input type="text" class="form-control" id="official-position" placeholder="Enter official position" required>
                                </div>
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label" for="official-description">Description / Position Details</label>
                                <textarea class="form-control" id="official-description" placeholder="Enter official description"></textarea>
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label" for="official-contact">Contact Information</label>
                                <input type="text" class="form-control" id="official-contact" placeholder="Enter contact details">
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label" for="official-avatar">Profile Image URL</label>
                                <input type="text" class="form-control" id="official-avatar" placeholder="https://example.com/avatar.jpg">
                                <small class="help-text">Enter direct URL to profile image (recommended size: 100x100 pixels)</small>
                                <div class="image-preview-container">
                                    <img id="official-avatar-preview" class="avatar-preview" alt="Official avatar preview">
                                </div>
                            </div>
                            
                            <button type="submit" class="btn btn-success" id="official-submit-btn">
                                <i class="fas fa-plus-circle"></i> Add Official
                            </button>
                            <button type="button" class="btn btn-secondary" id="official-cancel-edit" style="display: none;">
                                <i class="fas fa-times"></i> Cancel Edit
                            </button>
                        </form>
                    </div>
                </div>

                <div class="quick-guide-center">
                    <div class="quick-guide-header">
                        <h2 class="quick-guide-title"><i class="fas fa-book"></i> Quick Guide</h2>
                    </div>
                    
                    <div id="officials-guide" class="guide-section">
                        <h4>Barangay Officials Management</h4>
                        <p>Manage all barangay officials and their information.</p>
                        <ul>
                            <li>Add, edit, and delete officials</li>
                            <li>Upload profile images for each official</li>
                            <li>Include contact information</li>
                            <li>Add detailed descriptions for each official</li>
                            <li>Changes appear on the About Us page</li>
                        </ul>
                    </div>
                </div>
            </div>

            <div id="committees" class="tab-content">
                <div class="admin-section">
                    <h2 class="section-title"><i class="fas fa-user-friends"></i> Committees Section</h2>
                    <p style="color: var(--gray); margin-bottom: 25px;">Manage the different committees in your barangay and their members.</p>
                    
                    <div class="search-container">
                        <input type="text" class="search-bar" id="committees-search" placeholder="Search committees by title...">
                        <i class="fas fa-search search-icon"></i>
                    </div>
                    
<div class="tabs">
    <div class="tab active" data-committee-tab="existing">
        <i class="fa-solid fa-shield"></i> Existing Committees
    </div>

    <div class="tab" data-committee-tab="add">
        <i class="fa-solid fa-circle-plus"></i> Add New Committee
    </div>
</div>
                    
                    <div id="existing-committees" class="tab-content active">
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>Committee Name</th>
                                    <th>Chairperson</th>
                                    <th>Description</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="committees-table-body">
                            </tbody>
                        </table>
                    </div>
                    
                    <div id="add-committee" class="tab-content">
                        <form id="committee-form">
                            <input type="hidden" id="committee-edit-id" value="">
                            <div class="form-group">
                                <label class="form-label" for="committee-name">Committee Name *</label>
                                <input type="text" class="form-control" id="committee-name" placeholder="Enter committee name" required>
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label" for="committee-chairperson">Committee Chairperson</label>
                                <input type="text" class="form-control" id="committee-chairperson" placeholder="Enter committee chairperson">
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label" for="committee-description">Committee Description</label>
                                <textarea class="form-control" id="committee-description" placeholder="Enter committee description"></textarea>
                            </div>
                            
                            <button type="submit" class="btn btn-success" id="committee-submit-btn">
                                <i class="fas fa-plus-circle"></i> Add Committee
                            </button>
                            <button type="button" class="btn btn-secondary" id="committee-cancel-edit" style="display: none;">
                                <i class="fas fa-times"></i> Cancel Edit
                            </button>
                        </form>
                    </div>
                </div>

                <div class="quick-guide-center">
                    <div class="quick-guide-header">
                        <h2 class="quick-guide-title"><i class="fas fa-book"></i> Quick Guide</h2>
                    </div>
                    
                    <div id="committees-guide" class="guide-section">
                        <h4>Committees Management</h4>
                        <p>Manage barangay committees and their members.</p>
                        <ul>
                            <li>Add, edit, and delete committees</li>
                            <li>Include committee name, chairperson, and description</li>
                            <li>Organize by committee functions</li>
                            <li>Keep information up-to-date</li>
                        </ul>
                    </div>
                </div>
            </div>

            <div id="documents" class="tab-content">
                <div class="admin-section">
                    <h2 class="section-title"><i class="fas fa-file-alt"></i> Document Requirements Section</h2>
                    <p style="color: var(--gray); margin-bottom: 25px;">List the documents residents can request and their requirements.</p>
                    
                    <div class="search-container">
                        <input type="text" class="search-bar" id="documents-search" placeholder="Search documents by title...">
                        <i class="fas fa-search search-icon"></i>
                    </div>
                    
<div class="tabs">
    <div class="tab active" data-document-tab="existing">
        <i class="fa-solid fa-file-lines"></i> Existing Documents
    </div>

    <div class="tab" data-document-tab="add">
        <i class="fa-solid fa-file-circle-plus"></i> Add New Document
    </div>
</div>
                    
                    <div id="existing-documents" class="tab-content active">
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>Title</th>
                                    <th>Description</th>
                                    <th>Requirements</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="documents-table-body">
                            </tbody>
                        </table>
                    </div>
                    
                    <div id="add-document" class="tab-content">
                        <form id="document-form">
                            <input type="hidden" id="document-edit-id" value="">
                            <div class="form-group">
                                <label class="form-label" for="document-title">Document Title *</label>
                                <input type="text" class="form-control" id="document-title" placeholder="Enter document title" required>
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label" for="document-description">Document Description</label>
                                <textarea class="form-control" id="document-description" placeholder="Describe the document purpose"></textarea>
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label" for="document-requirements">Requirements</label>
                                <textarea class="form-control" id="document-requirements" placeholder="Enter requirements (one per line)"></textarea>
                                <small class="help-text">Each line will become a separate requirement</small>
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label" for="document-fee">Processing Fee</label>
                                <input type="text" class="form-control" id="document-fee" placeholder="Enter processing fee (if any)">
                            </div>
                            
                            <button type="submit" class="btn btn-success" id="document-submit-btn">
                                <i class="fas fa-plus-circle"></i> Add Document
                            </button>
                            <button type="button" class="btn btn-secondary" id="document-cancel-edit" style="display: none;">
                                <i class="fas fa-times"></i> Cancel Edit
                            </button>
                        </form>
                    </div>
                </div>

                <div class="quick-guide-center">
                    <div class="quick-guide-header">
                        <h2 class="quick-guide-title"><i class="fas fa-book"></i> Quick Guide</h2>
                    </div>
                    
                    <div id="documents-guide" class="guide-section">
                        <h4>Document Requirements Management</h4>
                        <p>Manage document requirements and information.</p>
                        <ul>
                            <li>Add, edit, and delete document types</li>
                            <li>Include descriptions and requirements</li>
                            <li>Specify processing fees if applicable</li>
                            <li>Keep information accurate and up-to-date</li>
                        </ul>
                    </div>
                </div>
            </div>

            <div id="location" class="tab-content">
                <div class="admin-section">
                    <h2 class="section-title"><i class="fas fa-map-marker-alt"></i> Location Section</h2>
                    <p style="color: var(--gray); margin-bottom: 25px;">Provide information about your barangay's location.</p>
                    
                    <form id="location-form">
                        <div class="form-group">
                            <label class="form-label" for="location-title">Section Title</label>
                            <input type="text" class="form-control" id="location-title" placeholder="Enter section title">
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label" for="location-subtitle">Section Subtitle</label>
                            <input type="text" class="form-control" id="location-subtitle" placeholder="Enter section subtitle">
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label" for="map-description">Map Description</label>
                            <input type="text" class="form-control" id="map-description" placeholder="Enter map description">
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label" for="map-address">Map Address</label>
                            <input type="text" class="form-control" id="map-address" placeholder="Enter map address">
                        </div>
                        
                        <button type="submit" class="btn btn-primary">
                            <i class="fas fa-save"></i> Update Location Section
                        </button>
                    </form>
                </div>

                <div class="quick-guide-center">
                    <div class="quick-guide-header">
                        <h2 class="quick-guide-title"><i class="fas fa-book"></i> Quick Guide</h2>
                    </div>
                    
                    <div id="location-guide" class="guide-section">
                        <h4>Location Section</h4>
                        <p>Provide information about your barangay's location.</p>
                        <ul>
                            <li>Update section title and subtitle</li>
                            <li>Modify map description</li>
                            <li>Update barangay address</li>
                            <li>Changes appear on the About Us page</li>
                        </ul>
                    </div>
                </div>
            </div>

            <div id="contact" class="tab-content">
                <div class="admin-section">
                    <h2 class="section-title"><i class="fas fa-phone-alt"></i> Contact Information</h2>
                    <p style="color: var(--gray); margin-bottom: 25px;">Update your barangay's contact details.</p>
                    
                    <form id="contact-form">
                        <div class="form-group">
                            <label class="form-label" for="contact-title">Section Title</label>
                            <input type="text" class="form-control" id="contact-title" placeholder="Enter section title">
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label" for="contact-location-address">Location Address</label>
                            <input type="text" class="form-control" id="contact-location-address" placeholder="Enter location address">
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label" for="contact-email-address">Email Address</label>
                            <input type="text" class="form-control" id="contact-email-address" placeholder="Enter email address">
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label" for="contact-phone-number">Phone Number</label>
                            <input type="text" class="form-control" id="contact-phone-number" placeholder="Enter phone number">
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label" for="map-link-text">Map Link Text</label>
                            <input type="text" class="form-control" id="map-link-text" placeholder="Enter map link text">
                        </div>
                        
                        <button type="submit" class="btn btn-primary">
                            <i class="fas fa-save"></i> Update Contact Information
                        </button>
                    </form>
                </div>

                <div class="quick-guide-center">
                    <div class="quick-guide-header">
                        <h2 class="quick-guide-title"><i class="fas fa-book"></i> Quick Guide</h2>
                    </div>
                    
                    <div id="contact-guide" class="guide-section">
                        <h4>Contact Information</h4>
                        <p>Update your barangay's contact details.</p>
                        <ul>
                            <li>Update section title</li>
                            <li>Modify location address</li>
                            <li>Update email and phone number</li>
                            <li>Customize map link text</li>
                        </ul>
                    </div>
                </div>
            </div>

            <div id="faq" class="tab-content">
                <div class="admin-section">
                    <h2 class="section-title"><i class="fas fa-question-circle"></i> FAQ Section</h2>
                    <p style="color: var(--gray); margin-bottom: 25px;">Manage frequently asked questions and their answers.</p>
                    
                    <div class="search-container">
                        <input type="text" class="search-bar" id="faq-search" placeholder="Search FAQs by question...">
                        <i class="fas fa-search search-icon"></i>
                    </div>
                    
<div class="tabs">
    <div class="tab active" data-faq-tab="existing">
        <i class="fa-solid fa-question-circle"></i> Existing FAQs
    </div>

    <div class="tab" data-faq-tab="add">
        <i class="fa-solid fa-circle-plus"></i> Add New FAQ
    </div>
</div>
                    
                    <div id="existing-faqs" class="tab-content active">
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>Question</th>
                                    <th>Answer</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="faq-table-body">
                            </tbody>
                        </table>
                    </div>
                    
                    <div id="add-faq" class="tab-content">
                        <form id="faq-form">
                            <input type="hidden" id="faq-edit-id" value="">
                            <div class="form-group">
                                <label class="form-label" for="faq-question">Question *</label>
                                <input type="text" class="form-control" id="faq-question" placeholder="Enter FAQ question" required>
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label" for="faq-answer">Answer *</label>
                                <textarea class="form-control" id="faq-answer" placeholder="Enter FAQ answer" required></textarea>
                            </div>
                            
                            <button type="submit" class="btn btn-success" id="faq-submit-btn">
                                <i class="fas fa-plus-circle"></i> Add FAQ
                            </button>
                            <button type="button" class="btn btn-secondary" id="faq-cancel-edit" style="display: none;">
                                <i class="fas fa-times"></i> Cancel Edit
                            </button>
                        </form>
                    </div>
                </div>

                <div class="quick-guide-center">
                    <div class="quick-guide-header">
                        <h2 class="quick-guide-title"><i class="fas fa-book"></i> Quick Guide</h2>
                    </div>
                    
                    <div id="faq-guide" class="guide-section">
                        <h4>FAQ Management</h4>
                        <p>Manage frequently asked questions and their answers.</p>
                        <ul>
                            <li>Add, edit, and delete FAQs</li>
                            <li>Provide clear and concise answers</li>
                            <li>Organize by common topics</li>
                            <li>Keep information up-to-date</li>
                        </ul>
                    </div>
                </div>
            </div>

            <div id="feedback" class="tab-content">
                <div class="admin-section">
                    <h2 class="section-title"><i class="fas fa-comments"></i> User Feedback</h2>
                    <p style="color: var(--gray); margin-bottom: 25px;">View and manage user feedback from the contact form. You can reply to users via EmailJS.</p>
                    
                    <div style="margin-bottom: 15px;">
                        <button onclick="debugFeedback()" class="btn btn-warning btn-sm">
                            <i class="fas fa-bug"></i> Debug Feedback
                        </button>
                        <button onclick="testRender()" class="btn btn-info btn-sm">
                            <i class="fas fa-eye"></i> Test Render
                        </button>
                    </div>
                    
                    <div class="search-container">
                        <input type="text" class="search-bar" id="feedback-search" placeholder="Search feedback by name, email, subject, or message...">
                        <i class="fas fa-search search-icon"></i>
                    </div>
                    
<div class="tabs">
    <div class="tab active" data-feedback-tab="all">
        <i class="fa-solid fa-envelope"></i> All Feedback
    </div>

    <div class="tab" data-feedback-tab="unread">
        <i class="fa-solid fa-envelope-circle-check"></i> Unread
    </div>

    <div class="tab" data-feedback-tab="read">
        <i class="fa-solid fa-envelope-open-text"></i> Read
    </div>
</div>
                    
                    <div id="feedback-content" class="tab-content active">
                        <div id="feedback-list">
                        </div>
                    </div>
                </div>

                <div class="quick-guide-center">
                    <div class="quick-guide-header">
                        <h2 class="quick-guide-title"><i class="fas fa-book"></i> Quick Guide</h2>
                    </div>
                    
                    <div id="feedback-guide" class="guide-section">
                        <h4>User Feedback Management</h4>
                        <p>Manage user feedback from the contact form.</p>
                        <ul>
                            <li>View all user messages with details</li>
                            <li>Mark messages as read or unread</li>
                            <li>Reply to users via EmailJS</li>
                            <li>Delete messages when no longer needed</li>
                            <li>Use search to find specific messages</li>
                        </ul>
                    </div>
                </div>
            </div>

            <div id="footer" class="tab-content">
                <div class="admin-section">
                    <h2 class="section-title"><i class="fas fa-sitemap"></i> Footer Section</h2>
                    <p style="color: var(--gray); margin-bottom: 25px;">Update the footer information that appears at the bottom of every page.</p>
                    
                    <form id="footer-form">
                        <div class="form-group">
                            <label class="form-label" for="footer-title">Footer Title</label>
                            <input type="text" class="form-control" id="footer-title" placeholder="Enter footer title">
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label" for="footer-description">Footer Description</label>
                            <textarea class="form-control" id="footer-description" placeholder="Enter footer description"></textarea>
                        </div>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label class="form-label" for="facebook-url">Facebook URL</label>
                                <input type="text" class="form-control" id="facebook-url" placeholder="https://facebook.com/yourpage">
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label" for="email-address">Email Address</label>
                                <input type="email" class="form-control" id="email-address" placeholder="barangay@email.com">
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label" for="contact-info">Contact Information</label>
                            <textarea class="form-control" id="contact-info" placeholder="Enter contact details (one per line)"></textarea>
                            <small class="help-text">Each line will become a separate contact item</small>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label" for="copyright-text">Copyright Text</label>
                            <input type="text" class="form-control" id="copyright-text" placeholder="Enter copyright text">
                        </div>
                        
                        <button type="submit" class="btn btn-primary">
                            <i class="fas fa-save"></i> Update Footer
                        </button>
                    </form>
                </div>

                <div class="quick-guide-center">
                    <div class="quick-guide-header">
                        <h2 class="quick-guide-title"><i class="fas fa-book"></i> Quick Guide</h2>
                    </div>
                    
                    <div id="footer-guide" class="guide-section">
                        <h4>Footer Section</h4>
                        <p>Customize the footer section and contact information.</p>
                        <ul>
                            <li>Update footer title and description</li>
                            <li>Add Facebook page URL</li>
                            <li>Include email address for contact</li>
                            <li>Update copyright information</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="save-status" class="save-status"></div>

<script>
    function debugFeedback() {
        console.log('=== FEEDBACK DEBUG INFO ===');
        
        if (!window.aboutUsAdminPanel) {
            console.error('‚ùå Admin panel instance not found!');
            return;
        }
        
        const feedbackList = document.getElementById('feedback-list');
        console.log('üìã Feedback list element:', feedbackList);
        
        console.log('üéØ Current feedback filter:', window.aboutUsAdminPanel.currentFeedbackFilter);
        
        const feedback = JSON.parse(localStorage.getItem('contactMessages')) || [];
        console.log('üíæ Stored feedback:', feedback);
        console.log('üî¢ Feedback count:', feedback.length);
        
        console.log('üñºÔ∏è Render method exists:', typeof window.aboutUsAdminPanel.renderFeedbackList);
        
        console.log('=== END DEBUG ===');
    }

    function testRender() {
        if (window.aboutUsAdminPanel) {
            console.log('üîÑ Manually rendering feedback...');
            window.aboutUsAdminPanel.renderFeedbackList();
        } else {
            console.error('‚ùå Admin panel not initialized');
        }
    }

    class AboutUsAdminPanel {
        constructor() {
            this.dataKey = 'barangayContent';
            this.currentData = null;
            this.activityLog = [];
            this.currentFeedbackFilter = 'all';
            this.init();
        }

        init() {
            try {
                this.loadData();
                this.setupEventListeners();
                this.updateDashboard();
                this.renderOfficialsTable();
                this.renderCommitteesTable();
                this.renderDocumentsTable();
                this.renderFAQTable();
                this.renderFeedbackList();
                this.logActivity('System initialized with connected data', 'success');
                this.updateSaveStatus();
            } catch (error) {
                console.error('Error initializing admin panel:', error);
                this.showAlert('Error initializing admin panel. Please refresh the page.', 'error');
            }
        }

        debugFeedbackStorage() {
            console.log('üîç Debugging feedback storage:');
            const feedback = JSON.parse(localStorage.getItem('contactMessages')) || [];
            console.log('Total feedback messages:', feedback.length);
            console.log('All feedback:', feedback);
            
            document.getElementById('total-feedback').textContent = feedback.length;
            
            return feedback;
        }

        loadData() {
            const savedData = localStorage.getItem(this.dataKey);
            if (savedData) {
                try {
                    this.currentData = JSON.parse(savedData);
                    console.log('‚úÖ Data loaded from localStorage');
                } catch (error) {
                    console.error('Error loading data:', error);
                    this.currentData = this.getDefaultData();
                }
            } else {
                this.currentData = this.getDefaultData();
                this.saveData();
                console.log('‚úÖ Using default data structure');
            }
            this.populateForms();
        }

        getDefaultData() {
            return {
                systemName: "BARANGAY 118 ONLINE SYSTEM",
                aboutUs: {
                    hero: {
                        title: "About Barangay 118",
                        description: "Get to know our mission and the people serving our community."
                    },
                    story: {
                        title: "Our Community Story",
                        content1: "For over 62 years, Barangay 118 has stood as a pillar of public service ‚Äî committed to delivering efficient, transparent, and accessible government services to our residents. Located in the heart of the city, our barangay is home to a vibrant community of families, businesses, and institutions working together for progress and unity.",
                        content2: "Through the launch of our Online System, we are taking our commitment to the next level ‚Äî providing 24/7 access to essential services from the comfort of your home. This digital transformation bridges the gap between the barangay administration and the people we serve, ensuring convenience and connectivity for all.",
                        content3: "Behind every program and project is a dedicated team of officials and staff who serve with integrity, transparency, and compassion ‚Äî ensuring that every resident feels heard, supported, and cared for.",
                        image: "Screen Shot 2025-11-23 at 10.35.19 AM.png"
                    },
                    missionVision: {
                        title: "Our Mission & Vision",
                        mission: {
                            title: "Our Mission",
                            description: "To provide efficient, transparent, and accessible government services to all residents through innovative digital solutions, fostering a connected and empowered community."
                        },
                        vision: {
                            title: "Our Vision", 
                            description: "To be a model barangay known for excellent public service, community engagement, and technological innovation that improves the quality of life for all residents."
                        }
                    },
                    officials: {
                        subtitle: "Meet the dedicated team serving our community",
                        list: [
                            { id: 1, avatar: 'J', name: 'Jerryllyn D. Bolo', position: 'Chairwoman', description: 'Leading Barangay 118 with dedication and commitment to community service.' },
                            { id: 2, avatar: 'J', name: 'Jeremy Abesamis', position: 'SK Chairman', description: 'Representing the youth of Barangay 118 and advocating for their needs.' },
                            { id: 3, avatar: 'R', name: 'Richard Rayos', position: 'Secretary', description: 'Managing barangay documentation and administrative processes.' },
                            { id: 4, avatar: 'C', name: 'Carolina T. Manabat', position: 'Treasurer', description: 'Overseeing barangay finances and budget management.' }
                        ]
                    },
                    committees: {
                        subtitle: "Our specialized committees addressing various community needs",
                        list: [
                            { id: 1, icon: 'fas fa-shield-heart', name: 'Committee on Violence Against Women and Children', chairperson: 'Annalyn Abesamis', description: 'Addressing issues related to violence against women and children and providing support services. This committee ensures protection and empowerment for vulnerable groups in our community.' },
                            { id: 2, icon: 'fas fa-hammer', name: 'Committee on Infrastructure', chairperson: 'Joemarie F. Dohinog', description: 'Overseeing barangay infrastructure projects and maintenance of public facilities. This committee ensures our community has well-maintained roads, buildings, and public spaces.' },
                            { id: 3, icon: 'fas fa-user-shield', name: 'Committee on Public Safety', chairperson: 'Ronald Allan Mateo', description: 'Ensuring the safety and security of residents through various safety programs. This committee coordinates with local authorities to maintain a secure environment for all.' },
                            { id: 4, icon: 'fas fa-hand-holding-medical', name: 'Committee on Health and Sanitation', chairperson: 'Lucas Badilla', description: 'Promoting health programs and maintaining cleanliness in the community. This committee organizes medical missions and ensures proper waste management.' },
                            { id: 5, icon: 'fas fa-peace', name: 'Committee on Peace and Order', chairperson: 'Novel Nolasco', description: 'Maintaining peace and order within the barangay through community policing. This committee resolves disputes and promotes harmonious living.' },
                            { id: 6, icon: 'fas fa-graduation-cap', name: 'Committee on Education', chairperson: 'Ma. Theresa Neri', description: 'Supporting educational initiatives and programs for residents of all ages. This committee provides scholarships and organizes literacy programs.' },
                            { id: 7, icon: 'fas fa-leaf', name: 'Committee on Environmental', chairperson: 'Alex Bolo', description: 'Implementing environmental programs and sustainability initiatives. This committee promotes green spaces and environmental awareness campaigns.' }
                        ]
                    },
                    documents: {
                        subtitle: "Information about the documents you can request and their requirements",
                        list: [
                            { 
                                id: 1, 
                                name: 'Barangay Clearance', 
                                description: 'Required for various transactions including employment, business permits, and legal matters. This document certifies your good standing in the community.', 
                                requirements: ['Valid government-issued ID', 'Proof of Residency (utility bill or lease agreement)', 'Community Tax Certificate (cedula)'], 
                                processingTime: '10-15 minutes' 
                            },
                            { 
                                id: 2, 
                                name: 'Certificate of Residency', 
                                description: 'Proof of residency in Barangay 118 for various purposes such as school enrollment, loan applications, and government transactions.', 
                                requirements: ['Valid government-issued ID', 'Proof of Residency (utility bill or barangay ID)', 'Completed application form'], 
                                processingTime: 'Same day' 
                            },
                            { 
                                id: 3, 
                                name: 'Certificate of Indigency', 
                                description: 'For availing government assistance programs and benefits. This document certifies your eligibility for social welfare programs.', 
                                requirements: ['Valid ID', 'Proof of Income or Affidavit of No Income', 'Proof of Residency'], 
                                processingTime: '1-2 days' 
                            },
                            { 
                                id: 4, 
                                name: 'Barangay ID', 
                                description: 'Official identification card issued by Barangay 118. Valid for local transactions and as supplementary identification.', 
                                requirements: ['Valid ID (if available)', 'Proof of Residency', '1x1 ID Photo', 'Completed application form'], 
                                processingTime: '3-5 working days' 
                            }
                        ]
                    },
                    location: {
                        title: "Barangay Location",
                        subtitle: "Find our barangay hall and important facilities",
                        mapDescription: "Interactive Barangay Map",
                        address: '402 2nd St, Grace Park East, Caloocan, Metro Manila',
                        location: 'Barangay 118 Hall, Grace Park East, Caloocan',
                        hotline: {
                            title: 'Barangay 118 Hotline',
                            description: 'For barangay-related concerns',
                            number: '(02) 8123-4567'
                        }
                    },
                    contact: {
                        title: "Get In Touch",
                        address: '402 2nd St, Grace Park East, Caloocan, Metro Manila',
                        email: 'info@barangay118.gov.ph',
                        phone: '(02) 8123-4567',
                        hours: {
                            weekdays: 'Monday-Friday: 8:00 AM - 5:00 PM',
                            saturday: 'Saturday: 8:00 AM - 12:00 PM'
                        },
                        mapLinkText: "View Map"
                    },
                    faqs: {
                        list: [
                            { 
                                id: 1, 
                                question: 'What are the office hours of the barangay hall?', 
                                answer: 'Our barangay hall is open from Monday to Friday, 8:00 AM to 5:00 PM, and on Saturdays from 8:00 AM to 12:00 PM. We are closed on Sundays and holidays.' 
                            },
                            { 
                                id: 2, 
                                question: 'How can I request a Barangay Clearance?', 
                                answer: 'Required documents: Valid government-issued ID (driver\'s license, passport, voter\'s ID), proof of residency (utility bill, lease/rental contract), completed barangay clearance application form, Community Tax Certificate (cedula), and passport-size photo if required. Fees: Free (no payment required). Processing time: Usually issued immediately (10‚Äì15 minutes). Where & How to apply: Apply in person at Barangay 118 Hall, weekdays 8 AM‚Äì5 PM. Submit requirements and receive your clearance.' 
                            },
                            { 
                                id: 3, 
                                question: 'How can I request a Certificate of Residency?', 
                                answer: 'Required documents: Government-issued ID, proof of address (utility bill, lease, or cedula), and completed residency certificate form. Fees: Free (no payment required). Processing time: On the spot or same day. Where & How to apply: Apply at Barangay 118 Hall, weekdays 8 AM‚Äì5 PM. Present your documents and receive the certificate. Eligibility / Rights: Possessory Rights (recognized occupancy) and Ownership Rights (legal ownership of the property).' 
                            },
                            { 
                                id: 4, 
                                question: 'How can I request a Certificate of Indigency?', 
                                answer: 'Required documents: Government-issued ID, proof of residence (barangay ID, voter\'s record, or utility bill), supporting income documents if applicable, and purpose statement. Fees: Free. Processing time: Usually issued immediately. Where & How to apply: Submit request at Barangay 118 Hall, weekdays 8 AM‚Äì5 PM. The officer will review and issue the certificate.' 
                            },
                            { 
                                id: 5, 
                                question: 'How can I get a Barangay ID?', 
                                answer: 'Required documents: Valid ID (if any), proof of residency (utility bill, barangay certificate, or cedula), 1‚Äì2 passport-size photos, and completed application form. Fees: Free. Processing time: Usually issued on the same day. Where & How to apply: Apply at Barangay 118 Hall, weekdays 8 AM‚Äì5 PM. Submit your requirements and receive your Barangay ID.' 
                            },
                            { 
                                id: 6, 
                                question: 'How can I report a community concern?', 
                                answer: 'You can report concerns by visiting the Barangay 118 Hall, calling our office at (02) 8123-4567, or using the contact form on our website. For emergencies, contact proper emergency services first. You may also use the "Get In Touch" section on our site; our team will review and assist you accordingly.' 
                            }
                        ]
                    }
                },
                footer: {
                    title: "Barangay 118 Online System",
                    description: "Digital and efficient services for Barangay 118.",
                    socialMedia: {
                        facebook: "https://www.facebook.com",
                        email: "mailto:barangay118@gmail.com"
                    },
                    contactInfo: [
                        "Barangay 118 Hall, Grace Park East",
                        "Caloocan, Metro Manila",
                        "(02) 8123-4567",
                        "info@barangay118.gov.ph",
                        "Mon-Fri: 8:00 AM - 5:00 PM"
                    ],
                    copyright: "&copy; 2025 Barangay 118 Online System. All Rights Reserved."
                }
            };
        }

        saveData() {
            localStorage.setItem(this.dataKey, JSON.stringify(this.currentData));
            
            this.updateDashboard();
            this.updateSaveStatus('Saved successfully!');
            this.logActivity('Data saved successfully', 'success');
            window.dispatchEvent(new Event('storage'));
            
            setTimeout(() => {
                this.updateSaveStatus();
            }, 2000);
        }

        populateForms() {
            if (!this.currentData) return;

            document.getElementById('site-title').value = this.currentData.systemName || '';
            document.getElementById('page-hero-title').value = this.currentData.aboutUs?.hero?.title || '';
            document.getElementById('page-hero-subtitle').value = this.currentData.aboutUs?.hero?.description || '';
            
            document.getElementById('about-section-title').value = "About Our Barangay";
            document.getElementById('about-story-title').value = this.currentData.aboutUs?.story?.title || '';
            document.getElementById('about-story-para1').value = this.currentData.aboutUs?.story?.content1 || '';
            document.getElementById('about-story-para2').value = this.currentData.aboutUs?.story?.content2 || '';
            document.getElementById('about-story-para3').value = this.currentData.aboutUs?.story?.content3 || '';
            document.getElementById('about-barangay-image').value = this.currentData.aboutUs?.story?.image || '';
            
            document.getElementById('mission-vision-title').value = this.currentData.aboutUs?.missionVision?.title || '';
            document.getElementById('mission-title').value = this.currentData.aboutUs?.missionVision?.mission?.title || '';
            document.getElementById('mission-text').value = this.currentData.aboutUs?.missionVision?.mission?.description || '';
            document.getElementById('vision-title').value = this.currentData.aboutUs?.missionVision?.vision?.title || '';
            document.getElementById('vision-text').value = this.currentData.aboutUs?.missionVision?.vision?.description || '';
            
            document.getElementById('location-title').value = this.currentData.aboutUs?.location?.title || '';
            document.getElementById('location-subtitle').value = this.currentData.aboutUs?.location?.subtitle || '';
            document.getElementById('map-description').value = this.currentData.aboutUs?.location?.mapDescription || '';
            document.getElementById('map-address').value = this.currentData.aboutUs?.location?.address || '';
            
            document.getElementById('contact-title').value = this.currentData.aboutUs?.contact?.title || '';
            document.getElementById('contact-location-address').value = this.currentData.aboutUs?.contact?.address || '';
            document.getElementById('contact-email-address').value = this.currentData.aboutUs?.contact?.email || '';
            document.getElementById('contact-phone-number').value = this.currentData.aboutUs?.contact?.phone || '';
            document.getElementById('map-link-text').value = this.currentData.aboutUs?.contact?.mapLinkText || '';
            
            document.getElementById('footer-title').value = this.currentData.footer?.title || '';
            document.getElementById('footer-description').value = this.currentData.footer?.description || '';
            document.getElementById('facebook-url').value = this.currentData.footer?.socialMedia?.facebook || '';
            document.getElementById('email-address').value = this.currentData.footer?.socialMedia?.email ? this.currentData.footer.socialMedia.email.replace('mailto:', '') : '';
            document.getElementById('contact-info').value = this.currentData.footer?.contactInfo ? this.currentData.footer.contactInfo.join('\n') : '';
            document.getElementById('copyright-text').value = this.currentData.footer?.copyright || '';

            this.updateImagePreviews();
        }

        updateImagePreviews() {
            const aboutPreview = document.getElementById('about-barangay-image-preview');
            const officialPreview = document.getElementById('official-avatar-preview');

            if (this.currentData.aboutUs?.story?.image) {
                aboutPreview.src = this.currentData.aboutUs.story.image;
                aboutPreview.classList.add('visible');
            }
            this.renderOfficialsTable();
        }

        setupEventListeners() {
            document.querySelectorAll('.sidebar-menu a').forEach(link => {
                link.addEventListener('click', (e) => {
                    e.preventDefault();
                    const tabId = link.getAttribute('data-tab');
                    this.switchTab(tabId);
                    this.updateQuickGuide(tabId);
                });
            });

            document.querySelectorAll('[data-official-tab]').forEach(tab => {
                tab.addEventListener('click', () => {
                    this.switchOfficialTab(tab.getAttribute('data-official-tab'));
                });
            });

            document.querySelectorAll('[data-committee-tab]').forEach(tab => {
                tab.addEventListener('click', () => {
                    this.switchCommitteeTab(tab.getAttribute('data-committee-tab'));
                });
            });

            document.querySelectorAll('[data-document-tab]').forEach(tab => {
                tab.addEventListener('click', () => {
                    this.switchDocumentTab(tab.getAttribute('data-document-tab'));
                });
            });

            document.querySelectorAll('[data-faq-tab]').forEach(tab => {
                tab.addEventListener('click', () => {
                    this.switchFAQTab(tab.getAttribute('data-faq-tab'));
                });
            });

            document.querySelectorAll('[data-feedback-tab]').forEach(tab => {
                tab.addEventListener('click', () => {
                    this.switchFeedbackTab(tab.getAttribute('data-feedback-tab'));
                });
            });

            this.setupFormListeners();
            document.getElementById('preview-site-btn').addEventListener('click', () => {
                window.open('AboutUs.html', '_blank');
            });

            document.getElementById('add-official-quick').addEventListener('click', () => {
                this.switchTab('officials');
                this.switchOfficialTab('add');
                this.updateQuickGuide('officials');
            });

            document.getElementById('add-committee-quick').addEventListener('click', () => {
                this.switchTab('committees');
                this.switchCommitteeTab('add');
                this.updateQuickGuide('committees');
            });

            document.getElementById('export-data-btn').addEventListener('click', () => {
                this.exportData();
            });

            document.getElementById('save-all-btn').addEventListener('click', (e) => {
                e.preventDefault();
                this.saveData();
                this.showAlert('All changes saved successfully!', 'success');
            });

            document.getElementById('logout-btn').addEventListener('click', (e) => {
                e.preventDefault();
                if (confirm('Are you sure you want to logout?')) {
                    window.location.href = 'LogIn.html';
                }
            });

            document.getElementById('about-barangay-image').addEventListener('input', (e) => {
                this.updateImagePreview('about-barangay-image-preview', e.target.value);
            });

            document.getElementById('official-avatar').addEventListener('input', (e) => {
                this.updateImagePreview('official-avatar-preview', e.target.value);
            });

            document.getElementById('officials-search').addEventListener('input', (e) => {
                this.searchOfficials(e.target.value);
            });

            document.getElementById('committees-search').addEventListener('input', (e) => {
                this.searchCommittees(e.target.value);
            });

            document.getElementById('documents-search').addEventListener('input', (e) => {
                this.searchDocuments(e.target.value);
            });

            document.getElementById('faq-search').addEventListener('input', (e) => {
                this.searchFAQ(e.target.value);
            });

            document.getElementById('feedback-search').addEventListener('input', (e) => {
                this.searchFeedback(e.target.value);
            });

            document.addEventListener('keydown', (e) => {
                if (e.key === 'F5' || (e.ctrlKey && e.key === 'r')) {
                    e.preventDefault();
                    this.refreshData();
                }
            });
        }

        refreshData() {
            this.loadData();
            this.renderOfficialsTable();
            this.renderCommitteesTable();
            this.renderDocumentsTable();
            this.renderFAQTable();
            this.renderFeedbackList();
            this.showAlert('Data refreshed successfully!', 'success');
            this.logActivity('Data refreshed manually', 'info');
        }

        setupFormListeners() {
            document.getElementById('header-form').addEventListener('submit', (e) => {
                e.preventDefault();
                this.currentData.systemName = document.getElementById('site-title').value;
                this.currentData.aboutUs.hero.title = document.getElementById('page-hero-title').value;
                this.currentData.aboutUs.hero.description = document.getElementById('page-hero-subtitle').value;
                this.saveData();
                this.showAlert('Header section updated and saved successfully!', 'success');
                this.logActivity('Header section updated', 'success');
            });

            document.getElementById('about-form').addEventListener('submit', (e) => {
                e.preventDefault();
                this.currentData.aboutUs.story.title = document.getElementById('about-story-title').value;
                this.currentData.aboutUs.story.content1 = document.getElementById('about-story-para1').value;
                this.currentData.aboutUs.story.content2 = document.getElementById('about-story-para2').value;
                this.currentData.aboutUs.story.content3 = document.getElementById('about-story-para3').value;
                this.currentData.aboutUs.story.image = document.getElementById('about-barangay-image').value;
                this.saveData();
                this.showAlert('About section updated and saved successfully!', 'success');
                this.logActivity('About section updated', 'success');
            });

            document.getElementById('mission-form').addEventListener('submit', (e) => {
                e.preventDefault();
                this.currentData.aboutUs.missionVision.title = document.getElementById('mission-vision-title').value;
                this.currentData.aboutUs.missionVision.mission.title = document.getElementById('mission-title').value;
                this.currentData.aboutUs.missionVision.mission.description = document.getElementById('mission-text').value;
                this.currentData.aboutUs.missionVision.vision.title = document.getElementById('vision-title').value;
                this.currentData.aboutUs.missionVision.vision.description = document.getElementById('vision-text').value;
                this.saveData();
                this.showAlert('Mission & Vision updated and saved successfully!', 'success');
                this.logActivity('Mission & Vision updated', 'success');
            });

            document.getElementById('official-form').addEventListener('submit', (e) => {
                e.preventDefault();
                
                const editId = document.getElementById('official-edit-id').value;
                const isEditing = editId !== '';
                
                const officialData = {
                    id: isEditing ? parseInt(editId) : (this.currentData.aboutUs.officials.list.length > 0 ? Math.max(...this.currentData.aboutUs.officials.list.map(o => o.id)) + 1 : 1),
                    name: document.getElementById('official-name').value,
                    position: document.getElementById('official-position').value,
                    description: document.getElementById('official-description').value,
                    contact: document.getElementById('official-contact').value,
                    avatar: document.getElementById('official-avatar').value
                };

                if (isEditing) {
                    const index = this.currentData.aboutUs.officials.list.findIndex(o => o.id == editId);
                    if (index !== -1) {
                        this.currentData.aboutUs.officials.list[index] = officialData;
                    }
                    this.logActivity(`Official updated: "${officialData.name}"`, 'success');
                    this.showAlert('Official updated and saved successfully!', 'success');
                } else {
                    this.currentData.aboutUs.officials.list.push(officialData);
                    this.logActivity(`Official added: "${officialData.name}"`, 'success');
                    this.showAlert('Official added and saved successfully!', 'success');
                }

                this.saveData();
                this.renderOfficialsTable();
                
                document.getElementById('official-form').reset();
                document.getElementById('official-edit-id').value = '';
                document.getElementById('official-submit-btn').innerHTML = '<i class="fas fa-plus-circle"></i> Add Official';
                document.getElementById('official-cancel-edit').style.display = 'none';
                
                if (isEditing) {
                    this.switchOfficialTab('existing');
                }
            });

            document.getElementById('committee-form').addEventListener('submit', (e) => {
                e.preventDefault();
                
                const editId = document.getElementById('committee-edit-id').value;
                const isEditing = editId !== '';
                
                const committeeData = {
                    id: isEditing ? parseInt(editId) : (this.currentData.aboutUs.committees.list.length > 0 ? Math.max(...this.currentData.aboutUs.committees.list.map(c => c.id)) + 1 : 1),
                    name: document.getElementById('committee-name').value,
                    chairperson: document.getElementById('committee-chairperson').value,
                    description: document.getElementById('committee-description').value,
                    icon: 'fas fa-users'
                };

                if (isEditing) {
                    const index = this.currentData.aboutUs.committees.list.findIndex(c => c.id == editId);
                    if (index !== -1) {
                        this.currentData.aboutUs.committees.list[index] = committeeData;
                    }
                    this.logActivity(`Committee updated: "${committeeData.name}"`, 'success');
                    this.showAlert('Committee updated and saved successfully!', 'success');
                } else {
                    this.currentData.aboutUs.committees.list.push(committeeData);
                    this.logActivity(`Committee added: "${committeeData.name}"`, 'success');
                    this.showAlert('Committee added and saved successfully!', 'success');
                }

                this.saveData();
                this.renderCommitteesTable();
                
                document.getElementById('committee-form').reset();
                document.getElementById('committee-edit-id').value = '';
                document.getElementById('committee-submit-btn').innerHTML = '<i class="fas fa-plus-circle"></i> Add Committee';
                document.getElementById('committee-cancel-edit').style.display = 'none';
                
                if (isEditing) {
                    this.switchCommitteeTab('existing');
                }
            });

            document.getElementById('document-form').addEventListener('submit', (e) => {
                e.preventDefault();
                
                const editId = document.getElementById('document-edit-id').value;
                const isEditing = editId !== '';
                
                const documentData = {
                    id: isEditing ? parseInt(editId) : (this.currentData.aboutUs.documents.list.length > 0 ? Math.max(...this.currentData.aboutUs.documents.list.map(d => d.id)) + 1 : 1),
                    name: document.getElementById('document-title').value,
                    description: document.getElementById('document-description').value,
                    requirements: document.getElementById('document-requirements').value.split('\n').filter(req => req.trim() !== ''),
                    processingTime: '',
                    icon: 'fas fa-file'
                };

                if (isEditing) {
                    const index = this.currentData.aboutUs.documents.list.findIndex(d => d.id == editId);
                    if (index !== -1) {
                        this.currentData.aboutUs.documents.list[index] = documentData;
                    }
                    this.logActivity(`Document updated: "${documentData.name}"`, 'success');
                    this.showAlert('Document updated and saved successfully!', 'success');
                } else {
                    this.currentData.aboutUs.documents.list.push(documentData);
                    this.logActivity(`Document added: "${documentData.name}"`, 'success');
                    this.showAlert('Document added and saved successfully!', 'success');
                }

                this.saveData();
                this.renderDocumentsTable();
                
                document.getElementById('document-form').reset();
                document.getElementById('document-edit-id').value = '';
                document.getElementById('document-submit-btn').innerHTML = '<i class="fas fa-plus-circle"></i> Add Document';
                document.getElementById('document-cancel-edit').style.display = 'none';
                
                if (isEditing) {
                    this.switchDocumentTab('existing');
                }
            });

            document.getElementById('faq-form').addEventListener('submit', (e) => {
                e.preventDefault();
                
                const editId = document.getElementById('faq-edit-id').value;
                const isEditing = editId !== '';
                
                const faqData = {
                    id: isEditing ? parseInt(editId) : (this.currentData.aboutUs.faqs.list.length > 0 ? Math.max(...this.currentData.aboutUs.faqs.list.map(f => f.id)) + 1 : 1),
                    question: document.getElementById('faq-question').value,
                    answer: document.getElementById('faq-answer').value
                };

                if (isEditing) {
                    const index = this.currentData.aboutUs.faqs.list.findIndex(f => f.id == editId);
                    if (index !== -1) {
                        this.currentData.aboutUs.faqs.list[index] = faqData;
                    }
                    this.logActivity(`FAQ updated: "${faqData.question}"`, 'success');
                    this.showAlert('FAQ updated and saved successfully!', 'success');
                } else {
                    this.currentData.aboutUs.faqs.list.push(faqData);
                    this.logActivity(`FAQ added: "${faqData.question}"`, 'success');
                    this.showAlert('FAQ added and saved successfully!', 'success');
                }

                this.saveData();
                this.renderFAQTable();
                
                document.getElementById('faq-form').reset();
                document.getElementById('faq-edit-id').value = '';
                document.getElementById('faq-submit-btn').innerHTML = '<i class="fas fa-plus-circle"></i> Add FAQ';
                document.getElementById('faq-cancel-edit').style.display = 'none';
                
                if (isEditing) {
                    this.switchFAQTab('existing');
                }
            });

            document.getElementById('location-form').addEventListener('submit', (e) => {
                e.preventDefault();
                this.currentData.aboutUs.location.title = document.getElementById('location-title').value;
                this.currentData.aboutUs.location.subtitle = document.getElementById('location-subtitle').value;
                this.currentData.aboutUs.location.mapDescription = document.getElementById('map-description').value;
                this.currentData.aboutUs.location.address = document.getElementById('map-address').value;
                this.saveData();
                this.showAlert('Location section updated and saved successfully!', 'success');
                this.logActivity('Location section updated', 'success');
            });

            document.getElementById('contact-form').addEventListener('submit', (e) => {
                e.preventDefault();
                this.currentData.aboutUs.contact.title = document.getElementById('contact-title').value;
                this.currentData.aboutUs.contact.address = document.getElementById('contact-location-address').value;
                this.currentData.aboutUs.contact.email = document.getElementById('contact-email-address').value;
                this.currentData.aboutUs.contact.phone = document.getElementById('contact-phone-number').value;
                this.currentData.aboutUs.contact.mapLinkText = document.getElementById('map-link-text').value;
                this.saveData();
                this.showAlert('Contact information updated and saved successfully!', 'success');
                this.logActivity('Contact information updated', 'success');
            });

            document.getElementById('footer-form').addEventListener('submit', (e) => {
                e.preventDefault();
                this.currentData.footer.title = document.getElementById('footer-title').value;
                this.currentData.footer.description = document.getElementById('footer-description').value;
                this.currentData.footer.socialMedia.facebook = document.getElementById('facebook-url').value;
                this.currentData.footer.socialMedia.email = 'mailto:' + document.getElementById('email-address').value;
                this.currentData.footer.contactInfo = document.getElementById('contact-info').value.split('\n');
                this.currentData.footer.copyright = document.getElementById('copyright-text').value;
                this.saveData();
                this.showAlert('Footer updated and saved successfully!', 'success');
                this.logActivity('Footer updated', 'success');
            });

            document.getElementById('official-cancel-edit').addEventListener('click', () => {
                document.getElementById('official-form').reset();
                document.getElementById('official-edit-id').value = '';
                document.getElementById('official-submit-btn').innerHTML = '<i class="fas fa-plus-circle"></i> Add Official';
                document.getElementById('official-cancel-edit').style.display = 'none';
            });

            document.getElementById('committee-cancel-edit').addEventListener('click', () => {
                document.getElementById('committee-form').reset();
                document.getElementById('committee-edit-id').value = '';
                document.getElementById('committee-submit-btn').innerHTML = '<i class="fas fa-plus-circle"></i> Add Committee';
                document.getElementById('committee-cancel-edit').style.display = 'none';
            });

            document.getElementById('document-cancel-edit').addEventListener('click', () => {
                document.getElementById('document-form').reset();
                document.getElementById('document-edit-id').value = '';
                document.getElementById('document-submit-btn').innerHTML = '<i class="fas fa-plus-circle"></i> Add Document';
                document.getElementById('document-cancel-edit').style.display = 'none';
            });

            document.getElementById('faq-cancel-edit').addEventListener('click', () => {
                document.getElementById('faq-form').reset();
                document.getElementById('faq-edit-id').value = '';
                document.getElementById('faq-submit-btn').innerHTML = '<i class="fas fa-plus-circle"></i> Add FAQ';
                document.getElementById('faq-cancel-edit').style.display = 'none';
            });
        }

        switchTab(tabId) {
            console.log('üîÑ Switching to tab:', tabId);
            
            document.querySelectorAll('.sidebar-menu a').forEach(item => {
                item.classList.remove('active');
            });
            document.querySelector(`[data-tab="${tabId}"]`).classList.add('active');

            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            document.getElementById(tabId).classList.add('active');
            
            if (tabId === 'officials') {
                this.renderOfficialsTable();
            } else if (tabId === 'committees') {
                this.renderCommitteesTable();
            } else if (tabId === 'documents') {
                this.renderDocumentsTable();
            } else if (tabId === 'faq') {
                this.renderFAQTable();
            } else if (tabId === 'feedback') {
                console.log('‚úÖ Feedback tab activated, rendering list...');
                setTimeout(() => {
                    this.renderFeedbackList();
                }, 100);
            }
        }

        updateQuickGuide(tabId) {
            document.querySelectorAll('.guide-section').forEach(section => {
                section.style.display = 'none';
            });
            
            const guideId = `${tabId}-guide`;
            const guideSection = document.getElementById(guideId);
            if (guideSection) {
                guideSection.style.display = 'block';
            }
        }

        switchOfficialTab(tab) {
            document.querySelectorAll('[data-official-tab]').forEach(t => t.classList.remove('active'));
            document.querySelector(`[data-official-tab="${tab}"]`).classList.add('active');

            document.querySelectorAll('#officials .tab-content').forEach(t => t.classList.remove('active'));
            document.getElementById(tab === 'existing' ? 'existing-officials' : 'add-official').classList.add('active');
        }

        switchCommitteeTab(tab) {
            document.querySelectorAll('[data-committee-tab]').forEach(t => t.classList.remove('active'));
            document.querySelector(`[data-committee-tab="${tab}"]`).classList.add('active');

            document.querySelectorAll('#committees .tab-content').forEach(t => t.classList.remove('active'));
            document.getElementById(tab === 'existing' ? 'existing-committees' : 'add-committee').classList.add('active');
        }

        switchDocumentTab(tab) {
            document.querySelectorAll('[data-document-tab]').forEach(t => t.classList.remove('active'));
            document.querySelector(`[data-document-tab="${tab}"]`).classList.add('active');

            document.querySelectorAll('#documents .tab-content').forEach(t => t.classList.remove('active'));
            document.getElementById(tab === 'existing' ? 'existing-documents' : 'add-document').classList.add('active');
        }

        switchFAQTab(tab) {
            document.querySelectorAll('[data-faq-tab]').forEach(t => t.classList.remove('active'));
            document.querySelector(`[data-faq-tab="${tab}"]`).classList.add('active');

            document.querySelectorAll('#faq .tab-content').forEach(t => t.classList.remove('active'));
            document.getElementById(tab === 'existing' ? 'existing-faqs' : 'add-faq').classList.add('active');
        }

        switchFeedbackTab(tab) {
            document.querySelectorAll('[data-feedback-tab]').forEach(t => t.classList.remove('active'));
            document.querySelector(`[data-feedback-tab="${tab}"]`).classList.add('active');
            
            this.currentFeedbackFilter = tab;
            this.renderFeedbackList(tab);
        }

        updateDashboard() {
            if (!this.currentData) return;
            
            document.getElementById('total-officials').textContent = this.currentData.aboutUs?.officials?.list?.length || 0;
            document.getElementById('total-committees').textContent = this.currentData.aboutUs?.committees?.list?.length || 0;
            document.getElementById('total-documents').textContent = this.currentData.aboutUs?.documents?.list?.length || 0;
            
            const feedback = JSON.parse(localStorage.getItem('contactMessages')) || [];
            document.getElementById('total-feedback').textContent = feedback.length;
        }

        updateSaveStatus(message = null) {
            const statusElement = document.getElementById('save-status');
            if (statusElement) {
                if (message) {
                    statusElement.textContent = message;
                } else {
                    statusElement.textContent = 'Manual Save';
                }
            }
        }

        renderOfficialsTable() {
            const tbody = document.getElementById('officials-table-body');
            tbody.innerHTML = '';

            if (!this.currentData.aboutUs.officials.list || this.currentData.aboutUs.officials.list.length === 0) {
                tbody.innerHTML = `<tr><td colspan="6" style="text-align: center; color: var(--gray); padding: 30px;">No officials yet. Add your first official!</td></tr>`;
                return;
            }

            this.currentData.aboutUs.officials.list.forEach((official, index) => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>
                        <div style="display: flex; align-items: center; gap: 10px;">
                            ${official.avatar ? `<img src="${official.avatar}" alt="${official.name}" class="avatar-preview" style="width: 50px; height: 50px;">` : '<div style="width: 50px; height: 50px; background: var(--gray-light); border-radius: 50%; display: flex; align-items: center; justify-content: center; color: var(--gray);"><i class="fas fa-user"></i></div>'}
                        </div>
                    </td>
                    <td><strong>${official.name}</strong></td>
                    <td>${official.position}</td>
                    <td>${official.description || 'No description'}</td>
                    <td>${official.contact || 'No contact'}</td>
                    <td>
                        <div class="action-buttons">
                            <button class="btn btn-primary btn-sm edit-official" data-id="${official.id}">
                                <i class="fas fa-edit"></i> Edit
                            </button>
                            <button class="btn btn-danger btn-sm delete-official" data-id="${official.id}">
                                <i class="fas fa-trash"></i> Delete
                            </button>
                        </div>
                    </td>
                `;
                tbody.appendChild(row);
            });

            document.querySelectorAll('.delete-official').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    const id = parseInt(e.target.closest('button').getAttribute('data-id'));
                    this.deleteOfficial(id);
                });
            });

            document.querySelectorAll('.edit-official').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    const id = parseInt(e.target.closest('button').getAttribute('data-id'));
                    this.editOfficial(id);
                });
            });
        }

        renderCommitteesTable() {
            const tbody = document.getElementById('committees-table-body');
            tbody.innerHTML = '';

            if (!this.currentData.aboutUs.committees.list || this.currentData.aboutUs.committees.list.length === 0) {
                tbody.innerHTML = `<tr><td colspan="4" style="text-align: center; color: var(--gray); padding: 30px;">No committees yet. Add your first committee!</td></tr>`;
                return;
            }

            this.currentData.aboutUs.committees.list.forEach((committee, index) => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td><strong>${committee.name}</strong></td>
                    <td>${committee.chairperson || 'No chairperson specified'}</td>
                    <td>${committee.description ? (committee.description.substring(0, 50) + (committee.description.length > 50 ? '...' : '')) : 'No description'}</td>
                    <td>
                        <div class="action-buttons">
                            <button class="btn btn-primary btn-sm edit-committee" data-id="${committee.id}">
                                <i class="fas fa-edit"></i> Edit
                            </button>
                            <button class="btn btn-danger btn-sm delete-committee" data-id="${committee.id}">
                                <i class="fas fa-trash"></i> Delete
                            </button>
                        </div>
                    </td>
                `;
                tbody.appendChild(row);
            });

            document.querySelectorAll('.delete-committee').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    const id = parseInt(e.target.closest('button').getAttribute('data-id'));
                    this.deleteCommittee(id);
                });
            });

            document.querySelectorAll('.edit-committee').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    const id = parseInt(e.target.closest('button').getAttribute('data-id'));
                    this.editCommittee(id);
                });
            });
        }

        renderDocumentsTable() {
            const tbody = document.getElementById('documents-table-body');
            tbody.innerHTML = '';

            if (!this.currentData.aboutUs.documents || 
                !this.currentData.aboutUs.documents.list || 
                this.currentData.aboutUs.documents.list.length === 0) {
                tbody.innerHTML = `<tr><td colspan="4" style="text-align: center; color: var(--gray); padding: 30px;">
                    No documents yet. Add your first document!
                </td></tr>`;
                return;
            }

            this.currentData.aboutUs.documents.list.forEach((doc) => {
                const requirements = doc.requirements || [];
                const requirementsText = requirements.length > 0 
                    ? requirements.join(', ') 
                    : 'No requirements specified';
                
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td><strong>${doc.name || 'Unnamed Document'}</strong></td>
                    <td>${doc.description ? 
                        (doc.description.substring(0, 50) + (doc.description.length > 50 ? '...' : '')) : 
                        'No description'}</td>
                    <td>${requirementsText}</td>
                    <td>
                        <div class="action-buttons">
                            <button class="btn btn-primary btn-sm edit-document" data-id="${doc.id}">
                                <i class="fas fa-edit"></i> Edit
                            </button>
                            <button class="btn btn-danger btn-sm delete-document" data-id="${doc.id}">
                                <i class="fas fa-trash"></i> Delete
                            </button>
                        </div>
                    </td>
                `;
                tbody.appendChild(row);
            });

            document.querySelectorAll('.delete-document').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    const id = parseInt(e.target.closest('button').getAttribute('data-id'));
                    this.deleteDocument(id);
                });
            });

            document.querySelectorAll('.edit-document').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    const id = parseInt(e.target.closest('button').getAttribute('data-id'));
                    this.editDocument(id);
                });
            });
        }

        renderFAQTable() {
            const tbody = document.getElementById('faq-table-body');
            tbody.innerHTML = '';

            if (!this.currentData.aboutUs.faqs.list || this.currentData.aboutUs.faqs.list.length === 0) {
                tbody.innerHTML = `<tr><td colspan="3" style="text-align: center; color: var(--gray); padding: 30px;">No FAQs yet. Add your first FAQ!</td></tr>`;
                return;
            }

            this.currentData.aboutUs.faqs.list.forEach((faq, index) => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td><strong>${faq.question}</strong></td>
                    <td>${faq.answer ? faq.answer.substring(0, 50) + (faq.answer.length > 50 ? '...' : '') : 'No answer'}</td>
                    <td>
                        <div class="action-buttons">
                            <button class="btn btn-primary btn-sm edit-faq" data-id="${faq.id}">
                                <i class="fas fa-edit"></i> Edit
                            </button>
                            <button class="btn btn-danger btn-sm delete-faq" data-id="${faq.id}">
                                <i class="fas fa-trash"></i> Delete
                            </button>
                        </div>
                    </td>
                `;
                tbody.appendChild(row);
            });

            document.querySelectorAll('.delete-faq').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    const id = parseInt(e.target.closest('button').getAttribute('data-id'));
                    this.deleteFAQ(id);
                });
            });

            document.querySelectorAll('.edit-faq').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    const id = parseInt(e.target.closest('button').getAttribute('data-id'));
                    this.editFAQ(id);
                });
            });
        }

        renderFeedbackList(filter = 'all') {
            try {
                console.log('üîÑ Rendering feedback list with filter:', filter);
                
                const feedbackList = document.getElementById('feedback-list');
                if (!feedbackList) {
                    console.error('‚ùå Feedback list element not found');
                    return;
                }

                feedbackList.innerHTML = '';

                let feedback = [];
                try {
                    const storedFeedback = localStorage.getItem('contactMessages');
                    console.log('üì¶ Raw stored feedback:', storedFeedback);
                    
                    feedback = storedFeedback ? JSON.parse(storedFeedback) : [];
                    console.log('üìä Parsed feedback:', feedback);
                } catch (error) {
                    console.error('‚ùå Error parsing feedback:', error);
                    feedback = [];
                }
                
                let filteredFeedback = feedback;
                if (filter === 'unread') {
                    filteredFeedback = feedback.filter(item => item.status === 'unread');
                } else if (filter === 'read') {
                    filteredFeedback = feedback.filter(item => item.status === 'read');
                }

                console.log('üéØ Filtered feedback:', filteredFeedback);

                if (filteredFeedback.length === 0) {
                    let message = 'No feedback messages found.';
                    let icon = 'fas fa-inbox';
                    
                    if (filter === 'unread') {
                        message = 'No unread messages.';
                        icon = 'fas fa-envelope';
                    } else if (filter === 'read') {
                        message = 'No read messages.';
                        icon = 'fas fa-envelope-open';
                    }
                    
                    feedbackList.innerHTML = `
                        <div class="feedback-empty-state">
                            <i class="${icon}"></i>
                            <p>${message}</p>
                            ${filter === 'all' ? '<p><small>Send a message from the contact form to test.</small></p>' : ''}
                        </div>
                    `;
                    return;
                }

                filteredFeedback.sort((a, b) => {
                    const timeA = a.timestamp ? new Date(a.timestamp) : new Date(0);
                    const timeB = b.timestamp ? new Date(b.timestamp) : new Date(0);
                    return timeB - timeA;
                });

                filteredFeedback.forEach(item => {
                    const feedbackCard = document.createElement('div');
                    feedbackCard.className = 'feedback-card';
                    
                    const emailStatus = item.emailSent === true ? 
                        '<span class="status-badge status-success"><i class="fas fa-paper-plane"></i> Email Sent</span>' :
                        item.emailSent === false ? 
                        '<span class="status-badge status-warning"><i class="fas fa-exclamation-triangle"></i> Backup Only</span>' :
                        '<span class="status-badge status-secondary"><i class="fas fa-question-circle"></i> Status Unknown</span>';
                    
                    feedbackCard.innerHTML = `
                        <div class="feedback-header">
                            <div class="feedback-user-info">
                                <div class="feedback-user">${this.escapeHtml(item.from_name || 'No Name')}</div>
                                <div class="feedback-email">${this.escapeHtml(item.from_email || 'No Email')}</div>
                            </div>
                            <div class="feedback-time">${item.timestamp || 'No timestamp'}</div>
                        </div>
                        <div class="feedback-subject">${this.escapeHtml(item.subject || 'No Subject')}</div>
                        <div class="feedback-message">${this.escapeHtml(item.message || 'No Message')}</div>
                        <div class="feedback-actions">
                            <span class="status-badge ${item.status === 'unread' ? 'status-unread' : 'status-read'}">
                                <i class="fas fa-${item.status === 'unread' ? 'envelope' : 'envelope-open'}"></i>
                                ${item.status === 'unread' ? 'Unread' : 'Read'} 
                            </span>
                            ${emailStatus}
                            <button class="btn btn-sm ${item.status === 'unread' ? 'btn-success' : 'btn-secondary'} mark-feedback" data-id="${item.id}">
                                <i class="fas fa-${item.status === 'unread' ? 'envelope-open' : 'envelope'}"></i> 
                                ${item.status === 'unread' ? 'Mark as Read' : 'Mark as Unread'}
                            </button>
                            <button class="btn btn-primary btn-sm reply-feedback" data-id="${item.id}" data-email="${item.from_email}" data-name="${item.from_name}">
                                <i class="fas fa-reply"></i> Reply
                            </button>
                            <button class="btn btn-danger btn-sm delete-feedback" data-id="${item.id}">
                                <i class="fas fa-trash"></i> Delete
                            </button>
                        </div>
                        ${item.note ? `<div class="help-text" style="margin-top: 10px; font-style: italic;"><i class="fas fa-info-circle"></i> ${item.note}</div>` : ''}
                        <div class="reply-form" id="reply-form-${item.id}" style="display: none;">
                            <textarea id="reply-message-${item.id}" placeholder="Type your reply message here..."></textarea>
                            <div class="reply-actions">
                                <button class="btn btn-secondary btn-sm cancel-reply" data-id="${item.id}">Cancel</button>
                                <button class="btn btn-success btn-sm send-reply" data-id="${item.id}" data-email="${item.from_email}" data-name="${item.from_name}">Send Reply</button>
                            </div>
                        </div>
                    `;
                    feedbackList.appendChild(feedbackCard);
                });

                this.attachFeedbackEventListeners();
                
                console.log('‚úÖ Feedback list rendered successfully');
                
            } catch (error) {
                console.error('‚ùå Error rendering feedback list:', error);
                const feedbackList = document.getElementById('feedback-list');
                if (feedbackList) {
                    feedbackList.innerHTML = `
                        <div class="feedback-empty-state">
                            <i class="fas fa-exclamation-triangle"></i>
                            <p>Error loading feedback</p>
                            <small>${error.message}</small>
                        </div>
                    `;
                }
            }
        }

        escapeHtml(text) {
            if (!text) return '';
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }

        attachFeedbackEventListeners() {
            console.log('üîó Attaching feedback event listeners');
            
            document.querySelectorAll('.mark-feedback').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    const id = parseInt(e.target.closest('button').getAttribute('data-id'));
                    console.log('üì¨ Marking feedback as read/unread:', id);
                    this.toggleFeedbackStatus(id);
                });
            });

            document.querySelectorAll('.delete-feedback').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    const id = parseInt(e.target.closest('button').getAttribute('data-id'));
                    console.log('üóëÔ∏è Deleting feedback:', id);
                    this.deleteFeedback(id);
                });
            });

            document.querySelectorAll('.reply-feedback').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    const id = parseInt(e.target.closest('button').getAttribute('data-id'));
                    console.log('üìß Showing reply form for:', id);
                    this.showReplyForm(id);
                });
            });

            document.querySelectorAll('.cancel-reply').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    const id = parseInt(e.target.closest('button').getAttribute('data-id'));
                    console.log('‚ùå Canceling reply for:', id);
                    this.hideReplyForm(id);
                });
            });

            document.querySelectorAll('.send-reply').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    const id = parseInt(e.target.closest('button').getAttribute('data-id'));
                    const email = e.target.closest('button').getAttribute('data-email');
                    const name = e.target.closest('button').getAttribute('data-name');
                    console.log('‚úâÔ∏è Sending reply to:', email, name);
                    this.sendReply(id, email, name);
                });
            });
            
            console.log('‚úÖ Feedback event listeners attached');
        }

        editOfficial(id) {
            const official = this.currentData.aboutUs.officials.list.find(o => o.id === id);
            
            if (!official) return;
            
            this.switchOfficialTab('add');
            
            document.getElementById('official-edit-id').value = official.id;
            document.getElementById('official-name').value = official.name;
            document.getElementById('official-position').value = official.position;
            document.getElementById('official-description').value = official.description || '';
            document.getElementById('official-contact').value = official.contact || '';
            document.getElementById('official-avatar').value = official.avatar || '';
            
            document.getElementById('official-submit-btn').innerHTML = '<i class="fas fa-save"></i> Update Official';
            document.getElementById('official-cancel-edit').style.display = 'inline-block';
            
            this.updateImagePreview('official-avatar-preview', official.avatar);
            
            this.logActivity(`Editing official: "${official.name}"`, 'info');
        }

        editCommittee(id) {
            const committee = this.currentData.aboutUs.committees.list.find(c => c.id === id);
            
            if (!committee) return;
            
            this.switchCommitteeTab('add');
            
            document.getElementById('committee-edit-id').value = committee.id;
            document.getElementById('committee-name').value = committee.name;
            document.getElementById('committee-chairperson').value = committee.chairperson || '';
            document.getElementById('committee-description').value = committee.description || '';
            
            document.getElementById('committee-submit-btn').innerHTML = '<i class="fas fa-save"></i> Update Committee';
            document.getElementById('committee-cancel-edit').style.display = 'inline-block';
            
            this.logActivity(`Editing committee: "${committee.name}"`, 'info');
        }

        editDocument(id) {
            const document = this.currentData.aboutUs.documents.list.find(d => d.id === id);
            
            if (!document) {
                this.showAlert('Document not found!', 'error');
                return;
            }
            
            this.switchDocumentTab('add');
            
            document.getElementById('document-edit-id').value = document.id;
            document.getElementById('document-title').value = document.name || '';
            document.getElementById('document-description').value = document.description || '';
            document.getElementById('document-requirements').value = document.requirements ? 
                document.requirements.join('\n') : '';
            
            document.getElementById('document-submit-btn').innerHTML = '<i class="fas fa-save"></i> Update Document';
            document.getElementById('document-cancel-edit').style.display = 'inline-block';
            
            this.logActivity(`Editing document: "${document.name}"`, 'info');
        }

        editFAQ(id) {
            const faq = this.currentData.aboutUs.faqs.list.find(f => f.id === id);
            
            if (!faq) return;
            
            this.switchFAQTab('add');
            
            document.getElementById('faq-edit-id').value = faq.id;
            document.getElementById('faq-question').value = faq.question;
            document.getElementById('faq-answer').value = faq.answer;
            
            document.getElementById('faq-submit-btn').innerHTML = '<i class="fas fa-save"></i> Update FAQ';
            document.getElementById('faq-cancel-edit').style.display = 'inline-block';
            
            this.logActivity(`Editing FAQ: "${faq.question}"`, 'info');
        }

        deleteOfficial(id) {
            if (confirm('Are you sure you want to delete this official?')) {
                this.currentData.aboutUs.officials.list = this.currentData.aboutUs.officials.list.filter(o => o.id !== id);
                
                this.saveData();
                this.renderOfficialsTable();
                this.logActivity(`Official deleted`, 'error');
                this.showAlert('Official deleted successfully', 'success');
            }
        }

        deleteCommittee(id) {
            if (confirm('Are you sure you want to delete this committee?')) {
                this.currentData.aboutUs.committees.list = this.currentData.aboutUs.committees.list.filter(c => c.id !== id);
                
                this.saveData();
                this.renderCommitteesTable();
                this.logActivity(`Committee deleted`, 'error');
                this.showAlert('Committee deleted successfully', 'success');
            }
        }

        deleteDocument(id) {
            if (confirm('Are you sure you want to delete this document?')) {
                this.currentData.aboutUs.documents.list = this.currentData.aboutUs.documents.list.filter(d => d.id !== id);
                
                this.saveData();
                this.renderDocumentsTable();
                this.logActivity(`Document deleted`, 'error');
                this.showAlert('Document deleted successfully', 'success');
            }
        }

        deleteFAQ(id) {
            if (confirm('Are you sure you want to delete this FAQ?')) {
                this.currentData.aboutUs.faqs.list = this.currentData.aboutUs.faqs.list.filter(f => f.id !== id);
                
                this.saveData();
                this.renderFAQTable();
                this.logActivity(`FAQ deleted`, 'error');
                this.showAlert('FAQ deleted successfully', 'success');
            }
        }

        toggleFeedbackStatus(id) {
            const feedback = JSON.parse(localStorage.getItem('contactMessages')) || [];
            const updatedFeedback = feedback.map(item => {
                if (item.id === id) {
                    return {
                        ...item,
                        status: item.status === 'unread' ? 'read' : 'unread'
                    };
                }
                return item;
            });
            
            localStorage.setItem('contactMessages', JSON.stringify(updatedFeedback));
            this.renderFeedbackList();
            this.updateDashboard();
            this.logActivity(`Feedback status updated`, 'success');
        }

        deleteFeedback(id) {
            if (confirm('Are you sure you want to delete this feedback?')) {
                const feedback = JSON.parse(localStorage.getItem('contactMessages')) || [];
                const updatedFeedback = feedback.filter(item => item.id !== id);
                
                localStorage.setItem('contactMessages', JSON.stringify(updatedFeedback));
                this.renderFeedbackList();
                this.updateDashboard();
                this.logActivity(`Feedback deleted`, 'error');
                this.showAlert('Feedback deleted successfully', 'success');
            }
        }

        showReplyForm(id) {
            document.getElementById(`reply-form-${id}`).style.display = 'block';
        }

        hideReplyForm(id) {
            document.getElementById(`reply-form-${id}`).style.display = 'none';
            document.getElementById(`reply-message-${id}`).value = '';
        }

        sendReply(id, email, name) {
            const message = document.getElementById(`reply-message-${id}`).value;
            
            if (!message.trim()) {
                this.showAlert('Please enter a reply message', 'error');
                return;
            }

            emailjs.init("KkQSfG62Jg8W8uies");

            const templateParams = {
                to_email: email,
                to_name: name,
                from_name: 'Barangay 118 Admin',
                message: message,
                reply_to: 'info@barangay118.gov.ph'
            };

            const sendBtn = document.querySelector(`#reply-form-${id} .send-reply`);
            const originalText = sendBtn.innerHTML;
            sendBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Sending...';
            sendBtn.disabled = true;

            emailjs.send('service_upx49ro', 'template_4loo5dp', templateParams)
                .then((response) => {
                    console.log('SUCCESS!', response.status, response.text);
                    this.showAlert('Reply sent successfully!', 'success');
                    this.hideReplyForm(id);
                    this.logActivity(`Reply sent to ${name}`, 'success');
                })
                .catch((error) => {
                    console.log('FAILED...', error);
                    this.showAlert('Failed to send reply. Please try again.', 'error');
                })
                .finally(() => {
                    sendBtn.innerHTML = originalText;
                    sendBtn.disabled = false;
                });
        }

        updateImagePreview(previewId, url) {
            const preview = document.getElementById(previewId);
            if (url) {
                preview.src = url;
                preview.classList.add('visible');
                preview.onerror = () => {
                    preview.classList.remove('visible');
                    this.showAlert('Failed to load image. Please check the URL.', 'error');
                };
            } else {
                preview.classList.remove('visible');
            }
        }

        searchOfficials(query) {
            const tbody = document.getElementById('officials-table-body');
            const rows = tbody.querySelectorAll('tr');
            const searchText = query.trim().toLowerCase();
            
            if (searchText === '') {
                rows.forEach(row => {
                    row.style.display = '';
                });
                return;
            }
            
            rows.forEach(row => {
                const name = row.cells[1].textContent.toLowerCase();
                const position = row.cells[2].textContent.toLowerCase();
                const description = row.cells[3].textContent.toLowerCase();
                
                if (name.includes(searchText) || position.includes(searchText) || description.includes(searchText)) {
                    row.style.display = '';
                } else {
                    row.style.display = 'none';
                }
            });
        }

        searchCommittees(query) {
            const tbody = document.getElementById('committees-table-body');
            const rows = tbody.querySelectorAll('tr');
            const searchText = query.trim().toLowerCase();
            
            if (searchText === '') {
                rows.forEach(row => {
                    row.style.display = '';
                });
                return;
            }
            
            rows.forEach(row => {
                const title = row.cells[0].textContent.toLowerCase();
                const chairperson = row.cells[1].textContent.toLowerCase();
                const description = row.cells[2].textContent.toLowerCase();
                
                if (title.includes(searchText) || chairperson.includes(searchText) || description.includes(searchText)) {
                    row.style.display = '';
                } else {
                    row.style.display = 'none';
                }
            });
        }

        searchDocuments(query) {
            const tbody = document.getElementById('documents-table-body');
            const rows = tbody.querySelectorAll('tr');
            const searchText = query.trim().toLowerCase();
            
            if (searchText === '') {
                rows.forEach(row => {
                    row.style.display = '';
                });
                return;
            }
            
            rows.forEach(row => {
                const title = row.cells[0].textContent.toLowerCase();
                const description = row.cells[1].textContent.toLowerCase();
                const requirements = row.cells[2].textContent.toLowerCase();
                
                if (title.includes(searchText) || description.includes(searchText) || requirements.includes(searchText)) {
                    row.style.display = '';
                } else {
                    row.style.display = 'none';
                }
            });
        }

        searchFAQ(query) {
            const tbody = document.getElementById('faq-table-body');
            const rows = tbody.querySelectorAll('tr');
            const searchText = query.trim().toLowerCase();
            
            if (searchText === '') {
                rows.forEach(row => {
                    row.style.display = '';
                });
                return;
            }
            
            rows.forEach(row => {
                const question = row.cells[0].textContent.toLowerCase();
                const answer = row.cells[1].textContent.toLowerCase();
                
                if (question.includes(searchText) || answer.includes(searchText)) {
                    row.style.display = '';
                } else {
                    row.style.display = 'none';
                }
            });
        }

        searchFeedback(query) {
            const feedbackList = document.getElementById('feedback-list');
            const cards = feedbackList.querySelectorAll('.feedback-card');
            const searchText = query.trim().toLowerCase();
            
            if (searchText === '') {
                cards.forEach(card => {
                    card.style.display = '';
                });
                return;
            }
            
            cards.forEach(card => {
                const name = card.querySelector('.feedback-user').textContent.toLowerCase();
                const email = card.querySelector('.feedback-email').textContent.toLowerCase();
                const subject = card.querySelector('.feedback-subject').textContent.toLowerCase();
                const message = card.querySelector('.feedback-message').textContent.toLowerCase();
                
                if (name.includes(searchText) || email.includes(searchText) || subject.includes(searchText) || message.includes(searchText)) {
                    card.style.display = '';
                } else {
                    card.style.display = 'none';
                }
            });
        }

        exportData() {
            const dataStr = JSON.stringify(this.currentData, null, 2);
            const blob = new Blob([dataStr], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const link = document.createElement('a');
            link.href = url;
            link.download = `barangay-data-backup-${new Date().toISOString().split('T')[0]}.json`;
            link.click();
            URL.revokeObjectURL(url);
            this.logActivity('Data exported successfully', 'success');
            this.showAlert('Data exported successfully!', 'success');
        }

        showAlert(message, type) {
            const alert = document.createElement('div');
            alert.className = `alert alert-${type}`;
            alert.innerHTML = `<strong><i class="fas fa-${type === 'success' ? 'check' : 'exclamation'}-circle"></i> ${message}</strong>`;
            
            const currentTab = document.querySelector('.tab-content.active');
            currentTab.insertBefore(alert, currentTab.firstChild);
            
            setTimeout(() => {
                alert.remove();
            }, 5000);
        }

        logActivity(message, type) {
            const activity = {
                timestamp: new Date().toLocaleTimeString(),
                message: message,
                type: type
            };
            this.activityLog.unshift(activity);
            
            if (this.activityLog.length > 10) {
                this.activityLog.pop();
            }
            
            this.updateActivityLog();
        }

        updateActivityLog() {
            const container = document.getElementById('recent-activity');
            if (!container) return;

            if (this.activityLog.length === 0) {
                container.innerHTML = `<p style="color: var(--gray); text-align: center; padding: 20px;"><i class="fas fa-clock"></i> No recent activity</p>`;
                return;
            }

            container.innerHTML = this.activityLog.map(activity => `
                <div style="padding: 10px 15px; border-left: 3px solid ${
                    activity.type === 'success' ? 'var(--success)' : 
                    activity.type === 'error' ? 'var(--error)' : 'var(--warning)'
                }; margin-bottom: 10px; background: var(--gray-light); border-radius: 0 var(--radius) var(--radius) 0;">
                    <div style="display: flex; justify-content: space-between; align-items: center;">
                        <span style="font-weight: 600;">${activity.message}</span>
                        <small style="color: var(--gray);">${activity.timestamp}</small>
                    </div>
                </div>
            `).join('');
        }
    }

    document.addEventListener('DOMContentLoaded', () => {
        try {
            window.aboutUsAdminPanel = new AboutUsAdminPanel();
        } catch (error) {
            console.error('Failed to initialize admin panel:', error);
            alert('Failed to initialize admin panel. Please refresh the page.');
        }
    });
</script>
</body>
</html>